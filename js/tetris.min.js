var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,g,h){if(h.get||h.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[g]=h.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var g=0;return $jscomp.iteratorPrototype(function(){return g<c.length?{done:!1,value:c[g++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var g=c[Symbol.iterator];return g?g.call(c):$jscomp.arrayIterator(c)};
$jscomp.polyfill=function(c,g,h,l){if(g){h=$jscomp.global;c=c.split(".");for(l=0;l<c.length-1;l++){var m=c[l];m in h||(h[m]={});h=h[m]}c=c[c.length-1];l=h[c];g=g(l);g!=l&&null!=g&&$jscomp.defineProperty(h,c,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("Array.from",function(c){return c?c:function(c,h,l){$jscomp.initSymbolIterator();h=null!=h?h:function(c){return c};var g=[],k=c[Symbol.iterator];if("function"==typeof k)for(c=k.call(c);!(k=c.next()).done;)g.push(h.call(l,k.value));else for(var k=c.length,f=0;f<k;f++)g.push(h.call(l,c[f]));return g}},"es6-impl","es3");
(function(){var c=!1,g=!1,h=!1,l=!1,m=!1,k="",f=1,A=document.getElementById("gameBoard"),u=1E3,d=[],t=function(){return Array.from(document.querySelectorAll(".moving"))},C=function(a){switch(a.key){case "ArrowLeft":v(-1);break;case "ArrowRight":v(1);break;case " ":u=100;break;case "r":case "R":case "ArrowUp":l&&B()}},w=function(a,b,e){document.getElementById(a+"-"+b).classList.add("moving");document.getElementById(a+"-"+b).classList.add(e);d[a][b]=1},p=function(a){return a.some(function(a){return 0>
a[0]||9<a[0]||0>a[1]||19<a[1]||0!==d[a[0]][a[1]]})},q=function(a,b){a.forEach(function(a){w(a[0],a[1],b)})},B=function(){var a=[];t().forEach(function(b){var e=$jscomp.makeIterator(n(b.id)),c=e.next().value,e=e.next().value;document.getElementById(c+"-"+e).classList.remove("moving");d[c][e]=0;a.push([c,e]);x(b)});if("st"===k){var b=D(a);p(b)?q(a,"cyan"):r(b,"cyan")}else"tt"===k?(b=E(a),p(b)?q(a,"blue"):r(b,"blue")):"rl"===k?(b=F(a),p(b)?q(a,"orange"):r(b,"orange")):"ml"===k?(b=G(a),p(b)?q(a,"green"):
r(b,"green")):"rz"===k?(b=H(a),p(b)?q(a,"purple"):r(b,"purple")):"mz"===k&&(b=I(a),p(b)?q(a,"red"):r(b,"red"))},r=function(a,b){f++;a.forEach(function(a){w(a[0],a[1],b)});5===f&&(f=1)},I=function(a){var b=[];1===f?(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0],a[1][1]-2]),b.push([a[2][0]+1,a[2][1]+1]),b.push([a[3][0],a[3][1]])):2===f?(b.push([a[0][0]+2,a[0][1]]),b.push([a[1][0]+1,a[1][1]+1]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]-1,a[3][1]+1])):3===f?(b.push([a[0][0],a[0][1]]),b.push([a[1][0]-
1,a[1][1]-1]),b.push([a[2][0],a[2][1]+2]),b.push([a[3][0]-1,a[3][1]+1])):4===f&&(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]-1]),b.push([a[3][0]-2,a[3][1]]));return b},H=function(a){var b=[];1===f?(b.push([a[0][0]+1,a[0][1]+1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]+1]),b.push([a[3][0]-2,a[3][1]])):2===f?(b.push([a[0][0],a[0][1]-2]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]-1]),b.push([a[3][0]-1,a[3][1]+1])):3===f?(b.push([a[0][0]+2,a[0][1]]),
b.push([a[1][0]+1,a[1][1]-1]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]-1,a[3][1]-1])):4===f&&(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0]+1,a[1][1]+1]),b.push([a[2][0],a[2][1]]),b.push([a[3][0],a[3][1]+2]));return b},G=function(a){var b=[];1===f?(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0]+2,a[1][1]+2]),b.push([a[2][0]+1,a[2][1]+1]),b.push([a[3][0],a[3][1]])):2===f?(b.push([a[0][0]+1,a[0][1]+1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]+1]),b.push([a[3][0]-2,a[3][1]+2])):3===f?(b.push([a[0][0],
a[0][1]]),b.push([a[1][0]-1,a[1][1]-1]),b.push([a[2][0]-2,a[2][1]-2]),b.push([a[3][0]-1,a[3][1]+1])):4===f&&(b.push([a[0][0]+2,a[0][1]-2]),b.push([a[1][0]+1,a[1][1]-1]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]-1,a[3][1]-1]));return b},F=function(a){var b=[];1===f?(b.push([a[0][0]+2,a[0][1]+2]),b.push([a[1][0]+1,a[1][1]+1]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]-1,a[3][1]+1])):2===f?(b.push([a[0][0],a[0][1]]),b.push([a[1][0]-1,a[1][1]-1]),b.push([a[2][0]-1,a[2][1]+1]),b.push([a[3][0]-2,a[3][1]+
2])):3===f?(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]-1]),b.push([a[3][0]-2,a[3][1]-2])):4===f&&(b.push([a[0][0]+2,a[0][1]-2]),b.push([a[1][0]+1,a[1][1]-1]),b.push([a[2][0]+1,a[2][1]+1]),b.push([a[3][0],a[3][1]]));return b},E=function(a){var b=[];1===f?(b.push([a[0][0],a[0][1]]),b.push([a[1][0],a[1][1]]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]+1,a[3][1]-1])):2===f?(b.push([a[0][0]+1,a[0][1]+1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0],a[2][1]]),b.push([a[3][0],
a[3][1]])):3===f?(b.push([a[0][0]-1,a[0][1]+1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0],a[2][1]]),b.push([a[3][0],a[3][1]])):4===f&&(b.push([a[0][0],a[0][1]]),b.push([a[1][0],a[1][1]]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]-1,a[3][1]-1]));return b},D=function(a){var b=[];1===f||3===f?(b.push([a[0][0]-1,a[0][1]+1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]+1,a[2][1]-1]),b.push([a[3][0]+2,a[3][1]-2])):(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]+1]),b.push([a[3][0]-
2,a[3][1]+2]));return b},J=function(a){" "===a.key&&(u=1E3)},v=function(a){var b=[],e=t();if(-1===a){if(e.some(function(a){return 0===Number(a.id.charAt(0))}))return;var c=!1;e.forEach(function(a){var b=$jscomp.makeIterator(n(a.id));a=b.next().value;b=b.next().value;2===d[a-1][b]&&(c=!0)});if(c)return}if(1===a){if(e.some(function(a){return 9===Number(a.id.charAt(0))}))return;var f=!1;e.forEach(function(a){var b=$jscomp.makeIterator(n(a.id));a=b.next().value;b=b.next().value;2===d[a+1][b]&&(f=!0)});
if(f)return}e.forEach(function(a){var e=$jscomp.makeIterator(n(a.id));a=e.next().value;e=e.next().value;document.getElementById(a+"-"+e).classList.remove("moving");d[a][e]=0;b.push([a,e])});b.forEach(function(b){document.getElementById(b[0]+a+"-"+b[1]).classList.add("moving");y(document.getElementById(b[0]+"-"+b[1]),document.getElementById(b[0]+a+"-"+b[1]),"moving");d[b[0]+a][b[1]]=1})},K=function(){g||(h=c=!0,z())},M=function(){for(var a=19;0<=a;a--){for(var b=0,e=0;10>e;e++)2===d[e][a]&&b++;if(10===
b){b=a;for(e=0;10>e;e++)d[e][b]=0,document.getElementById(e+"-"+b).classList.remove("placed");b=a;for(e=19;0<=e;e--)for(var c=0;10>c;c++)if(!(e>b))if(e<=b&&0!==e){document.getElementById(c+"-"+e).classList.remove("placed");d[c][e]=d[c][e-1];var f=L(c,e);2===d[c][e]&&(document.getElementById(c+"-"+e).classList.add("placed"),document.getElementById(c+"-"+e).classList.add(f))}else document.getElementById(c+"-"+e).classList.remove("placed"),d[c][e]=0;a++}}},z=function(){h?N():l&&O();m&&P();window.sleep(u).then(function(){c&&
!g&&z()})},N=function(){var a=window.randomIntFromInterval(0,6);if(Q(a))g=!0,window.closableModal("Game Over!");else{switch(a){case 0:for(a=0;4>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("cyan"),d[2][a]=1;k="st";break;case 1:for(a=0;2>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("yellow"),d[2][a]=1;for(a=0;2>a;a++)document.getElementById("3-"+a).classList.add("moving"),document.getElementById("3-"+
a).classList.add("yellow"),d[3][a]=1;k="sq";break;case 2:for(a=0;3>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("orange"),d[2][a]=1;document.getElementById("3-2").classList.add("moving");document.getElementById("3-2").classList.add("orange");d[3][2]=1;k="rl";break;case 3:for(a=0;3>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("blue"),d[2][a]=1;document.getElementById("1-1").classList.add("moving");
document.getElementById("1-1").classList.add("blue");d[1][1]=1;k="tt";break;case 4:for(a=0;3>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("green"),d[2][a]=1;document.getElementById("1-2").classList.add("moving");document.getElementById("1-2").classList.add("green");d[1][2]=1;k="ml";break;case 5:for(a=0;2>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("purple"),d[2][a]=1;for(a=
0;2>a;a++)document.getElementById("3-"+(a+1)).classList.add("moving"),document.getElementById("3-"+(a+1)).classList.add("purple"),d[3][a+1]=1;k="rz";break;case 6:for(a=0;2>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("red"),d[2][a]=1;for(a=0;2>a;a++)document.getElementById("1-"+(a+1)).classList.add("moving"),document.getElementById("1-"+(a+1)).classList.add("red"),d[1][a+1]=1;k="mz"}h=!1;l=!0}},Q=function(a){if(0===a)return 0!==d[2][0]||
0!==d[2][1]||0!==d[2][2]||0!==d[2][3];if(1===a)return 0!==d[2][0]||0!==d[2][1]||0!==d[3][0]||0!==d[3][1];if(2===a)return 0!==d[2][0]||0!==d[2][1]||0!==d[2][2]||0!==d[3][2];if(3===a)return 0!==d[2][0]||0!==d[2][1]||0!==d[2][2]||0!==d[1][1];if(4===a)return 0!==d[2][0]||0!==d[2][1]||0!==d[2][2]||0!==d[1][2];if(5===a)return 0!==d[2][0]||0!==d[2][1]||0!==d[3][1]||0!==d[3][2];if(6===a)return 0!==d[2][0]||0!==d[2][1]||0!==d[1][1]||0!==d[1][2]},O=function(){var a=t();if(R(a))l=!1,m=!0;else{var b=[];a.forEach(function(a){var e=
$jscomp.makeIterator(n(a.id));a=e.next().value;e=e.next().value;document.getElementById(a+"-"+e).classList.remove("moving");d[a][e]=0;b.push([a,e])});b.forEach(function(a){document.getElementById(a[0]+"-"+(a[1]+1)).classList.add("moving");d[a[0]][a[1]+1]=1;y(document.getElementById(a[0]+"-"+a[1]),document.getElementById(a[0]+"-"+(a[1]+1)),"moving")})}},R=function(a){var b=!1;a.forEach(function(a){var c=$jscomp.makeIterator(n(a.id));a=c.next().value;c=c.next().value;if(19===c||2===d[a][c+1])b=!0});
return b},P=function(){t().forEach(function(a){a.classList.remove("moving");a.classList.add("placed");var b=$jscomp.makeIterator(n(a.id));a=b.next().value;b=b.next().value;d[a][b]=2});M();m=!1;h=!0;f=1},n=function(a){a=a.split("-");return[Number(a[0]),Number(a[1])]},x=function(a){a.classList.contains("blue")?a.classList.remove("blue"):a.classList.contains("red")?a.classList.remove("red"):a.classList.contains("yellow")?a.classList.remove("yellow"):a.classList.contains("green")?a.classList.remove("green"):
a.classList.contains("cyan")?a.classList.remove("cyan"):a.classList.contains("purple")?a.classList.remove("purple"):a.classList.contains("orange")&&a.classList.remove("orange")},L=function(a,b){var c=document.getElementById(a+"-"+b),d=document.getElementById(a+"-"+(b-1));x(c);if(d.classList.contains("blue"))return"blue";if(d.classList.contains("red"))return"red";if(d.classList.contains("yellow"))return"yellow";if(d.classList.contains("green"))return"green";if(d.classList.contains("cyan"))return"cyan";
if(d.classList.contains("purple"))return"purple";if(d.classList.contains("orange"))return"orange"},y=function(a,b,c){a.classList.contains("blue")?(b.classList.add("blue"),a.classList.contains(c)||a.classList.remove("blue")):a.classList.contains("red")?(b.classList.add("red"),a.classList.contains(c)||a.classList.remove("red")):a.classList.contains("yellow")?(b.classList.add("yellow"),a.classList.contains(c)||a.classList.remove("yellow")):a.classList.contains("green")?(b.classList.add("green"),a.classList.contains(c)||
a.classList.remove("green")):a.classList.contains("cyan")?(b.classList.add("cyan"),a.classList.contains(c)||a.classList.remove("cyan")):a.classList.contains("purple")?(b.classList.add("purple"),a.classList.contains(c)||a.classList.remove("purple")):a.classList.contains("orange")&&(b.classList.add("orange"),a.classList.contains(c)||a.classList.remove("orange"))};(function(){for(var a=0;10>a;a++){var b=document.createElement("div");b.id="col-"+a;b.classList.add("col");A.appendChild(b);d.push([]);for(var c=
0;20>c;c++){var f=document.createElement("div");f.id=a+"-"+c;f.classList.add("cell");b.appendChild(f);d[a].push(0)}}document.getElementById("startBtn").addEventListener("click",K);document.addEventListener("keydown",C);document.addEventListener("keyup",J);window.onkeydown=function(a){return!(" "===a.key&&a.target==document.body)}})()})();
