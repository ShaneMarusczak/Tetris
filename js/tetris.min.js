var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(d,h,k){if(k.get||k.set)throw new TypeError("ES3 does not support getters and setters.");d!=Array.prototype&&d!=Object.prototype&&(d[h]=k.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var h=0;return $jscomp.iteratorPrototype(function(){return h<d.length?{done:!1,value:d[h++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.makeIterator=function(d){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var h=d[Symbol.iterator];return h?h.call(d):$jscomp.arrayIterator(d)};
$jscomp.polyfill=function(d,h,k,l){if(h){k=$jscomp.global;d=d.split(".");for(l=0;l<d.length-1;l++){var m=d[l];m in k||(k[m]={});k=k[m]}d=d[d.length-1];l=k[d];h=h(l);h!=l&&null!=h&&$jscomp.defineProperty(k,d,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.from",function(d){return d?d:function(d,k,l){$jscomp.initSymbolIterator();k=null!=k?k:function(d){return d};var h=[],g=d[Symbol.iterator];if("function"==typeof g)for(d=g.call(d);!(g=d.next()).done;)h.push(k.call(l,g.value));else for(var g=d.length,f=0;f<g;f++)h.push(k.call(l,d[f]));return h}},"es6-impl","es3");
(function(){var d=!1,h=!1,k=!1,l=!1,m=!1,g="",f=1,p=0,w=window.randomIntFromInterval(0,6),q="",x=!0,H=document.getElementById("gameBoard"),z=1E3,e=[],v=function(){return Array.from(document.querySelectorAll(".moving"))},K=function(a){switch(a.key){case "ArrowLeft":B(-1);break;case "ArrowRight":B(1);break;case " ":z=100;break;case "r":case "R":case "ArrowUp":if(!l||"sq"===g)break;I();break;case "h":x&&(x=!1,document.getElementById("heldPieceImage").classList.remove("hidden"),J(),""===q?(q=g,C(),A(!1,
q)):(a=q,q=g,A(!0,a),C()))}},D=function(a,b,c){document.getElementById(a+"-"+b).classList.add("moving");document.getElementById(a+"-"+b).classList.add(c);e[a][b]=1},r=function(a){return a.some(function(a){return 0>a[0]||9<a[0]||0>a[1]||19<a[1]||0!==e[a[0]][a[1]]})},t=function(a,b){a.forEach(function(a){D(a[0],a[1],b)})},I=function(){var a=[];v().forEach(function(b){var c=$jscomp.makeIterator(n(b.id)),d=c.next().value,c=c.next().value;document.getElementById(d+"-"+c).classList.remove("moving");e[d][c]=
0;a.push([d,c]);y(b)});if("st"===g){var b=L(a);r(b)?t(a,"cyan"):u(b,"cyan")}else"tt"===g?(b=M(a),r(b)?t(a,"blue"):u(b,"blue")):"rl"===g?(b=N(a),r(b)?t(a,"orange"):u(b,"orange")):"ml"===g?(b=O(a),r(b)?t(a,"green"):u(b,"green")):"rz"===g?(b=P(a),r(b)?t(a,"purple"):u(b,"purple")):"mz"===g&&(b=Q(a),r(b)?t(a,"red"):u(b,"red"))},u=function(a,b){f++;a.forEach(function(a){D(a[0],a[1],b)});5===f&&(f=1)},Q=function(a){var b=[];1===f?(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0],a[1][1]-2]),b.push([a[2][0]+
1,a[2][1]+1]),b.push([a[3][0],a[3][1]])):2===f?(b.push([a[0][0]+2,a[0][1]]),b.push([a[1][0]+1,a[1][1]+1]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]-1,a[3][1]+1])):3===f?(b.push([a[0][0],a[0][1]]),b.push([a[1][0]-1,a[1][1]-1]),b.push([a[2][0],a[2][1]+2]),b.push([a[3][0]-1,a[3][1]+1])):4===f&&(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]-1]),b.push([a[3][0]-2,a[3][1]]));return b},P=function(a){var b=[];1===f?(b.push([a[0][0]+1,a[0][1]+1]),b.push([a[1][0],a[1][1]]),
b.push([a[2][0]-1,a[2][1]+1]),b.push([a[3][0]-2,a[3][1]])):2===f?(b.push([a[0][0],a[0][1]-2]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]-1]),b.push([a[3][0]-1,a[3][1]+1])):3===f?(b.push([a[0][0]+2,a[0][1]]),b.push([a[1][0]+1,a[1][1]-1]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]-1,a[3][1]-1])):4===f&&(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0]+1,a[1][1]+1]),b.push([a[2][0],a[2][1]]),b.push([a[3][0],a[3][1]+2]));return b},O=function(a){var b=[];1===f?(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0]+
2,a[1][1]+2]),b.push([a[2][0]+1,a[2][1]+1]),b.push([a[3][0],a[3][1]])):2===f?(b.push([a[0][0]+1,a[0][1]+1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]+1]),b.push([a[3][0]-2,a[3][1]+2])):3===f?(b.push([a[0][0],a[0][1]]),b.push([a[1][0]-1,a[1][1]-1]),b.push([a[2][0]-2,a[2][1]-2]),b.push([a[3][0]-1,a[3][1]+1])):4===f&&(b.push([a[0][0]+2,a[0][1]-2]),b.push([a[1][0]+1,a[1][1]-1]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]-1,a[3][1]-1]));return b},N=function(a){var b=[];1===f?(b.push([a[0][0]+2,
a[0][1]+2]),b.push([a[1][0]+1,a[1][1]+1]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]-1,a[3][1]+1])):2===f?(b.push([a[0][0],a[0][1]]),b.push([a[1][0]-1,a[1][1]-1]),b.push([a[2][0]-1,a[2][1]+1]),b.push([a[3][0]-2,a[3][1]+2])):3===f?(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]-1]),b.push([a[3][0]-2,a[3][1]-2])):4===f&&(b.push([a[0][0]+2,a[0][1]-2]),b.push([a[1][0]+1,a[1][1]-1]),b.push([a[2][0]+1,a[2][1]+1]),b.push([a[3][0],a[3][1]]));return b},M=function(a){var b=
[];1===f?(b.push([a[0][0],a[0][1]]),b.push([a[1][0],a[1][1]]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]+1,a[3][1]-1])):2===f?(b.push([a[0][0]+1,a[0][1]+1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0],a[2][1]]),b.push([a[3][0],a[3][1]])):3===f?(b.push([a[0][0]-1,a[0][1]+1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0],a[2][1]]),b.push([a[3][0],a[3][1]])):4===f&&(b.push([a[0][0],a[0][1]]),b.push([a[1][0],a[1][1]]),b.push([a[2][0],a[2][1]]),b.push([a[3][0]-1,a[3][1]-1]));return b},L=function(a){var b=[];
1===f||3===f?(b.push([a[0][0]-1,a[0][1]+1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]+1,a[2][1]-1]),b.push([a[3][0]+2,a[3][1]-2])):(b.push([a[0][0]+1,a[0][1]-1]),b.push([a[1][0],a[1][1]]),b.push([a[2][0]-1,a[2][1]+1]),b.push([a[3][0]-2,a[3][1]+2]));return b},R=function(a){" "===a.key&&(z=1E3)},B=function(a){var b=[],c=v();if(-1!==a||!c.some(function(a){return 0===Number(a.id.charAt(0))}))if(1!==a||!c.some(function(a){return 9===Number(a.id.charAt(0))})){for(var E=$jscomp.makeIterator(c),d=E.next();!d.done;d=
E.next()){var f=$jscomp.makeIterator(n(d.value.id)),d=f.next().value,f=f.next().value;if(2===e[d+a][f])return}c.forEach(function(a){var c=$jscomp.makeIterator(n(a.id));a=c.next().value;c=c.next().value;document.getElementById(a+"-"+c).classList.remove("moving");e[a][c]=0;b.push([a,c])});b.forEach(function(b){document.getElementById(b[0]+a+"-"+b[1]).classList.add("moving");F(document.getElementById(b[0]+"-"+b[1]),document.getElementById(b[0]+a+"-"+b[1]),"moving");e[b[0]+a][b[1]]=1})}},S=function(){h||
(k=d=!0,document.getElementById("nextPieceImage").classList.remove("hidden"),G())},U=function(){for(var a=0,b=19;0<=b;b--){for(var c=0,d=0;10>d;d++)2===e[d][b]&&c++;if(10===c){c=b;for(d=0;10>d;d++)e[d][c]=0,document.getElementById(d+"-"+c).classList.remove("placed");c=b;for(d=19;0<=d;d--)for(var f=0;10>f;f++)if(!(d>c))if(d<=c&&0!==d){document.getElementById(f+"-"+d).classList.remove("placed");e[f][d]=e[f][d-1];var g=T(f,d);2===e[f][d]&&(document.getElementById(f+"-"+d).classList.add("placed"),document.getElementById(f+
"-"+d).classList.add(g))}else document.getElementById(f+"-"+d).classList.remove("placed"),e[f][d]=0,y(document.getElementById(f+"-"+d));b++;a++}}switch(a){case 1:p+=40;break;case 2:p+=100;break;case 3:p+=300;break;case 4:p+=1200}document.getElementById("points").textContent=p},G=function(){k?(A(!1),x=!0):l&&(V(),x=!1);m&&W();window.sleep(z).then(function(){d&&!h&&G()})},J=function(){v().forEach(function(a){var b=$jscomp.makeIterator(n(a.id)),c=b.next().value,b=b.next().value;y(a);a.classList.remove("moving");
e[c][b]=0})},C=function(){var a=document.getElementById("heldPieceImage");switch(q){case "st":a.src="images/st.jpeg";break;case "sq":a.src="images/sq.jpeg";break;case "rl":a.src="images/rl.png";break;case "tt":a.src="images/tt.png";break;case "ml":a.src="images/ml.png";break;case "rz":a.src="images/rz.png";break;case "mz":a.src="images/mz.png"}},A=function(a,b){var c;if(a)c=b;else{c=w;do w=window.randomIntFromInterval(0,6);while(w===c);var d=document.getElementById("nextPieceImage");switch(w){case 0:d.src=
"images/st.jpeg";break;case 1:d.src="images/sq.jpeg";break;case 2:d.src="images/rl.png";break;case 3:d.src="images/tt.png";break;case 4:d.src="images/ml.png";break;case 5:d.src="images/rz.png";break;case 6:d.src="images/mz.png"}}if(X(c))h=!0,window.closableModal("Game Over!");else{switch(c){case 0:case "st":for(c=0;4>c;c++)document.getElementById("2-"+c).classList.add("moving"),document.getElementById("2-"+c).classList.add("cyan"),e[2][c]=1;g="st";break;case 1:case "sq":for(c=0;2>c;c++)document.getElementById("2-"+
c).classList.add("moving"),document.getElementById("2-"+c).classList.add("yellow"),e[2][c]=1;for(c=0;2>c;c++)document.getElementById("3-"+c).classList.add("moving"),document.getElementById("3-"+c).classList.add("yellow"),e[3][c]=1;g="sq";break;case 2:case "rl":for(c=0;3>c;c++)document.getElementById("2-"+c).classList.add("moving"),document.getElementById("2-"+c).classList.add("orange"),e[2][c]=1;document.getElementById("3-2").classList.add("moving");document.getElementById("3-2").classList.add("orange");
e[3][2]=1;g="rl";break;case 3:case "tt":for(c=0;3>c;c++)document.getElementById("2-"+c).classList.add("moving"),document.getElementById("2-"+c).classList.add("blue"),e[2][c]=1;document.getElementById("1-1").classList.add("moving");document.getElementById("1-1").classList.add("blue");e[1][1]=1;g="tt";break;case 4:case "ml":for(c=0;3>c;c++)document.getElementById("2-"+c).classList.add("moving"),document.getElementById("2-"+c).classList.add("green"),e[2][c]=1;document.getElementById("1-2").classList.add("moving");
document.getElementById("1-2").classList.add("green");e[1][2]=1;g="ml";break;case 5:case "rz":for(c=0;2>c;c++)document.getElementById("2-"+c).classList.add("moving"),document.getElementById("2-"+c).classList.add("purple"),e[2][c]=1;for(c=0;2>c;c++)document.getElementById("3-"+(c+1)).classList.add("moving"),document.getElementById("3-"+(c+1)).classList.add("purple"),e[3][c+1]=1;g="rz";break;case 6:case "mz":for(c=0;2>c;c++)document.getElementById("2-"+c).classList.add("moving"),document.getElementById("2-"+
c).classList.add("red"),e[2][c]=1;for(c=0;2>c;c++)document.getElementById("1-"+(c+1)).classList.add("moving"),document.getElementById("1-"+(c+1)).classList.add("red"),e[1][c+1]=1;g="mz"}k=!1;l=!0}},X=function(a){if(0===a)return 0!==e[2][0]||0!==e[2][1]||0!==e[2][2]||0!==e[2][3];if(1===a)return 0!==e[2][0]||0!==e[2][1]||0!==e[3][0]||0!==e[3][1];if(2===a)return 0!==e[2][0]||0!==e[2][1]||0!==e[2][2]||0!==e[3][2];if(3===a)return 0!==e[2][0]||0!==e[2][1]||0!==e[2][2]||0!==e[1][1];if(4===a)return 0!==e[2][0]||
0!==e[2][1]||0!==e[2][2]||0!==e[1][2];if(5===a)return 0!==e[2][0]||0!==e[2][1]||0!==e[3][1]||0!==e[3][2];if(6===a)return 0!==e[2][0]||0!==e[2][1]||0!==e[1][1]||0!==e[1][2]},V=function(){var a=v();if(Y(a))l=!1,m=!0;else{var b=[];a.forEach(function(a){var c=$jscomp.makeIterator(n(a.id));a=c.next().value;c=c.next().value;document.getElementById(a+"-"+c).classList.remove("moving");e[a][c]=0;b.push([a,c])});b.forEach(function(a){document.getElementById(a[0]+"-"+(a[1]+1)).classList.add("moving");e[a[0]][a[1]+
1]=1;F(document.getElementById(a[0]+"-"+a[1]),document.getElementById(a[0]+"-"+(a[1]+1)),"moving")})}},Y=function(a){var b=!1;a.forEach(function(a){var c=$jscomp.makeIterator(n(a.id));a=c.next().value;c=c.next().value;if(19===c||2===e[a][c+1])b=!0});return b},W=function(){v().forEach(function(a){a.classList.remove("moving");a.classList.add("placed");var b=$jscomp.makeIterator(n(a.id));a=b.next().value;b=b.next().value;e[a][b]=2});U();m=!1;k=!0;f=1},n=function(a){a=a.split("-");return[Number(a[0]),
Number(a[1])]},y=function(a){a.classList.contains("blue")?a.classList.remove("blue"):a.classList.contains("red")?a.classList.remove("red"):a.classList.contains("yellow")?a.classList.remove("yellow"):a.classList.contains("green")?a.classList.remove("green"):a.classList.contains("cyan")?a.classList.remove("cyan"):a.classList.contains("purple")?a.classList.remove("purple"):a.classList.contains("orange")&&a.classList.remove("orange")},T=function(a,b){var c=document.getElementById(a+"-"+b),d=document.getElementById(a+
"-"+(b-1));y(c);if(d.classList.contains("blue"))return"blue";if(d.classList.contains("red"))return"red";if(d.classList.contains("yellow"))return"yellow";if(d.classList.contains("green"))return"green";if(d.classList.contains("cyan"))return"cyan";if(d.classList.contains("purple"))return"purple";if(d.classList.contains("orange"))return"orange"},F=function(a,b,c){a.classList.contains("blue")?(b.classList.add("blue"),a.classList.contains(c)||a.classList.remove("blue")):a.classList.contains("red")?(b.classList.add("red"),
a.classList.contains(c)||a.classList.remove("red")):a.classList.contains("yellow")?(b.classList.add("yellow"),a.classList.contains(c)||a.classList.remove("yellow")):a.classList.contains("green")?(b.classList.add("green"),a.classList.contains(c)||a.classList.remove("green")):a.classList.contains("cyan")?(b.classList.add("cyan"),a.classList.contains(c)||a.classList.remove("cyan")):a.classList.contains("purple")?(b.classList.add("purple"),a.classList.contains(c)||a.classList.remove("purple")):a.classList.contains("orange")&&
(b.classList.add("orange"),a.classList.contains(c)||a.classList.remove("orange"))};(function(){for(var a=0;10>a;a++){var b=document.createElement("div");b.id="col-"+a;b.classList.add("col");H.appendChild(b);e.push([]);for(var c=0;20>c;c++){var d=document.createElement("div");d.id=a+"-"+c;d.classList.add("cell");b.appendChild(d);e[a].push(0)}}document.getElementById("startBtn").addEventListener("click",S);document.addEventListener("keydown",K);document.addEventListener("keyup",R);document.getElementById("points").textContent=
p;window.onkeydown=function(a){return!((" "===a.key||"ArrowUp"===a.key||"ArrowDown"===a.key)&&a.target==document.body)}})()})();
