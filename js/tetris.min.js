var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,f,g){if(g.get||g.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[f]=g.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var f=0;return $jscomp.iteratorPrototype(function(){return f<b.length?{done:!1,value:b[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=b[Symbol.iterator];return f?f.call(b):$jscomp.arrayIterator(b)};
$jscomp.polyfill=function(b,f,g,k){if(f){g=$jscomp.global;b=b.split(".");for(k=0;k<b.length-1;k++){var m=b[k];m in g||(g[m]={});g=g[m]}b=b[b.length-1];k=g[b];f=f(k);f!=k&&null!=f&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("Array.from",function(b){return b?b:function(b,g,k){$jscomp.initSymbolIterator();g=null!=g?g:function(b){return b};var f=[],e=b[Symbol.iterator];if("function"==typeof e)for(b=e.call(b);!(e=b.next()).done;)f.push(g.call(k,e.value));else for(var e=b.length,p=0;p<e;p++)f.push(g.call(k,b[p]));return f}},"es6-impl","es3");
(function(){var b=!1,f=!1,g=!1,k=!1,m="",e=1,p=document.getElementById("gameBoard"),r=1E3,h=[],q=function(){return Array.from(document.querySelectorAll(".moving"))},y=function(a){switch(a.key){case "ArrowLeft":t(-1);break;case "ArrowRight":t(1);break;case " ":r=100;break;case "r":case "R":x()}},d=function(a,b,c){document.getElementById(a+"-"+b).classList.add("moving");document.getElementById(a+"-"+b).classList.add(c);h[a][b]=1},x=function(){if(canRoate){var a=[];q().forEach(function(b){var c=$jscomp.makeIterator(l(b.id)),
n=c.next().value,c=c.next().value;document.getElementById(n+"-"+c).classList.remove("moving");h[n][c]=0;a.push([n,c]);u(b)});switch(m){case "st":1===e||3===e?(d(a[0][0]-1,a[0][1]+1,"cyan"),d(a[1][0],a[1][1],"cyan"),d(a[2][0]+1,a[2][1]-1,"cyan"),d(a[3][0]+2,a[3][1]-2,"cyan")):(d(a[0][0]+1,a[0][1]-1,"cyan"),d(a[1][0],a[1][1],"cyan"),d(a[2][0]-1,a[2][1]+1,"cyan"),d(a[3][0]-2,a[3][1]+2,"cyan"));e++;5===e&&(e=1);break;case "tt":1===e?(d(a[0][0],a[0][1],"blue"),d(a[1][0],a[1][1],"blue"),d(a[2][0],a[2][1],
"blue"),d(a[3][0]+1,a[3][1]-1,"blue"),e++):2===e?(d(a[0][0]+1,a[0][1]+1,"blue"),d(a[1][0],a[1][1],"blue"),d(a[2][0],a[2][1],"blue"),d(a[3][0],a[3][1],"blue"),e++):3===e?(d(a[0][0]-1,a[0][1]+1,"blue"),d(a[1][0],a[1][1],"blue"),d(a[2][0],a[2][1],"blue"),d(a[3][0],a[3][1],"blue"),e++):4===e&&(d(a[0][0],a[0][1],"blue"),d(a[1][0],a[1][1],"blue"),d(a[2][0],a[2][1],"blue"),d(a[3][0]-1,a[3][1]-1,"blue"),e=1);break;case "rl":1===e?(d(a[0][0]+2,a[0][1]+2,"orange"),d(a[1][0]+1,a[1][1]+1,"orange"),d(a[2][0],
a[2][1],"orange"),d(a[3][0]-1,a[3][1]+1,"orange"),e++):2===e?(d(a[0][0],a[0][1],"orange"),d(a[1][0]-1,a[1][1]-1,"orange"),d(a[2][0]-1,a[2][1]+1,"orange"),d(a[3][0]-2,a[3][1]+2,"orange"),e++):3===e?(d(a[0][0]+1,a[0][1]-1,"orange"),d(a[1][0],a[1][1],"orange"),d(a[2][0]-1,a[2][1]-1,"orange"),d(a[3][0]-2,a[3][1]-2,"orange"),e++):4===e&&(d(a[0][0]+2,a[0][1]-2,"orange"),d(a[1][0]+1,a[1][1]-1,"orange"),d(a[2][0]+1,a[2][1]+1,"orange"),d(a[3][0],a[3][1],"orange"),e=1)}}},z=function(){r=1E3},t=function(a){var b=
[],c=q();if(-1===a){if(c.some(function(a){return 0===Number(a.id.charAt(0))}))return;var n=!1;c.forEach(function(a){var c=$jscomp.makeIterator(l(a.id));a=c.next().value;c=c.next().value;2===h[a-1][c]&&(n=!0)});if(n)return}if(1===a){if(c.some(function(a){return 9===Number(a.id.charAt(0))}))return;var d=!1;c.forEach(function(a){var c=$jscomp.makeIterator(l(a.id));a=c.next().value;c=c.next().value;2===h[a+1][c]&&(d=!0)});if(d)return}c.forEach(function(a){var c=$jscomp.makeIterator(l(a.id));a=c.next().value;
c=c.next().value;document.getElementById(a+"-"+c).classList.remove("moving");h[a][c]=0;b.push([a,c])});b.forEach(function(c){document.getElementById(c[0]+a+"-"+c[1]).classList.add("moving");v(document.getElementById(c[0]+"-"+c[1]),document.getElementById(c[0]+a+"-"+c[1]),"moving");h[c[0]+a][c[1]]=1})},A=function(){f=b=!0;w()},C=function(){for(var a=19;0<=a;a--){for(var b=0,c=0;10>c;c++)2===h[c][a]&&b++;if(10===b){b=a;for(c=0;10>c;c++)h[c][b]=0,document.getElementById(c+"-"+b).classList.remove("placed");
b=a;for(c=19;0<=c;c--)for(var d=0;10>d;d++)if(!(c>b))if(c<=b&&0!==c){document.getElementById(d+"-"+c).classList.remove("placed");h[d][c]=h[d][c-1];var e=B(d,c);2===h[d][c]&&(document.getElementById(d+"-"+c).classList.add("placed"),document.getElementById(d+"-"+c).classList.add(e))}else document.getElementById(d+"-"+c).classList.remove("placed"),h[d][c]=0;a++}}},w=function(){f?D():g&&E();k&&F();window.sleep(r).then(function(){b&&w()})},D=function(){window.randomIntFromInterval(0,6);for(var a=0;3>a;a++)document.getElementById("2-"+
a).classList.add("moving"),document.getElementById("2-"+a).classList.add("orange"),h[2][a]=1;document.getElementById("3-2").classList.add("moving");document.getElementById("3-2").classList.add("orange");h[3][2]=1;m="rl";f=!1;g=!0},E=function(){var a=q();if(G(a))g=!1,k=!0;else{var b=[];a.forEach(function(a){var c=$jscomp.makeIterator(l(a.id));a=c.next().value;c=c.next().value;document.getElementById(a+"-"+c).classList.remove("moving");h[a][c]=0;b.push([a,c])});b.forEach(function(a){document.getElementById(a[0]+
"-"+(a[1]+1)).classList.add("moving");h[a[0]][a[1]+1]=1;v(document.getElementById(a[0]+"-"+a[1]),document.getElementById(a[0]+"-"+(a[1]+1)),"moving")})}},G=function(a){var b=!1;a.forEach(function(a){var c=$jscomp.makeIterator(l(a.id));a=c.next().value;c=c.next().value;if(19===c||2===h[a][c+1])b=!0});return b},F=function(){q().forEach(function(a){a.classList.remove("moving");a.classList.add("placed");var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;h[a][b]=2});C();k=!1;f=!0;e=
1},l=function(a){a=a.split("-");return[Number(a[0]),Number(a[1])]},u=function(a){a.classList.contains("blue")?a.classList.remove("blue"):a.classList.contains("red")?a.classList.remove("red"):a.classList.contains("yellow")?a.classList.remove("yellow"):a.classList.contains("green")?a.classList.remove("green"):a.classList.contains("cyan")?a.classList.remove("cyan"):a.classList.contains("purple")?a.classList.remove("purple"):a.classList.contains("orange")&&a.classList.remove("orange")},B=function(a,b){var c=
document.getElementById(a+"-"+b),d=document.getElementById(a+"-"+(b-1));u(c);if(d.classList.contains("blue"))return"blue";if(d.classList.contains("red"))return"red";if(d.classList.contains("yellow"))return"yellow";if(d.classList.contains("green"))return"green";if(d.classList.contains("cyan"))return"cyan";if(d.classList.contains("purple"))return"purple";if(d.classList.contains("orange"))return"orange"},v=function(a,b,c){a.classList.contains("blue")?(b.classList.add("blue"),a.classList.contains(c)||
a.classList.remove("blue")):a.classList.contains("red")?(b.classList.add("red"),a.classList.contains(c)||a.classList.remove("red")):a.classList.contains("yellow")?(b.classList.add("yellow"),a.classList.contains(c)||a.classList.remove("yellow")):a.classList.contains("green")?(b.classList.add("green"),a.classList.contains(c)||a.classList.remove("green")):a.classList.contains("cyan")?(b.classList.add("cyan"),a.classList.contains(c)||a.classList.remove("cyan")):a.classList.contains("purple")?(b.classList.add("purple"),
a.classList.contains(c)||a.classList.remove("purple")):a.classList.contains("orange")&&(b.classList.add("orange"),a.classList.contains(c)||a.classList.remove("orange"))};(function(){for(var a=0;10>a;a++){var b=document.createElement("div");b.id="col-"+a;b.classList.add("col");p.appendChild(b);h.push([]);for(var c=0;20>c;c++){var d=document.createElement("div");d.id=a+"-"+c;d.classList.add("cell");b.appendChild(d);h[a].push(0)}}document.getElementById("startBtn").addEventListener("click",A);document.addEventListener("keydown",
y);document.addEventListener("keyup",z);window.onkeydown=function(a){return!(" "===a.key&&a.target==document.body)}})()})();
