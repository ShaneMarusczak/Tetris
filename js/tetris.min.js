var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,f){if(f.get||f.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[e]=f.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var e=0;return $jscomp.iteratorPrototype(function(){return e<b.length?{done:!1,value:b[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=b[Symbol.iterator];return e?e.call(b):$jscomp.arrayIterator(b)};
$jscomp.polyfill=function(b,e,f,g){if(e){f=$jscomp.global;b=b.split(".");for(g=0;g<b.length-1;g++){var m=b[g];m in f||(f[m]={});f=f[m]}b=b[b.length-1];g=f[b];e=e(g);e!=g&&null!=e&&$jscomp.defineProperty(f,b,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.from",function(b){return b?b:function(b,f,g){$jscomp.initSymbolIterator();f=null!=f?f:function(b){return b};var e=[],d=b[Symbol.iterator];if("function"==typeof d)for(b=d.call(b);!(d=b.next()).done;)e.push(f.call(g,d.value));else for(var d=b.length,k=0;k<d;k++)e.push(f.call(g,b[k]));return e}},"es6-impl","es3");
(function(){var b=!1,e=!1,f=!1,g=!1,m=document.getElementById("gameBoard"),d=[],k=function(){return Array.from(document.querySelectorAll(".moving"))},q=function(a){switch(a.key){case "ArrowLeft":n(-1);break;case "ArrowRight":n(1)}},n=function(a){var b=[],c=k();if(-1===a){if(c.some(function(a){return 0===Number(a.id.charAt(0))}))return;var h=!1;c.forEach(function(a){var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;2===d[a-1][b]&&(h=!0)});if(h)return}if(1===a){if(c.some(function(a){return 9===
Number(a.id.charAt(0))}))return;var e=!1;c.forEach(function(a){var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;2===d[a+1][b]&&(e=!0)});if(e)return}c.forEach(function(a){var c=$jscomp.makeIterator(l(a.id));a=c.next().value;c=c.next().value;document.getElementById(a+"-"+c).classList.remove("moving");d[a][c]=0;b.push([a,c])});b.forEach(function(b){document.getElementById(b[0]+a+"-"+b[1]).classList.add("moving");d[b[0]+a][b[1]]=1})},r=function(){e=b=!0;p()},t=function(){for(var a=
19;0<=a;a--){for(var b=0,c=0;10>c;c++)2===d[c][a]&&b++;if(10===b){b=a;for(c=0;10>c;c++)d[c][b]=0,document.getElementById(c+"-"+b).classList.remove("placed");b=a;for(c=19;0<=c;c--)for(var h=0;10>h;h++)c>b||(c<=b&&0!==c?(document.getElementById(h+"-"+c).classList.remove("placed"),d[h][c]=d[h][c-1],2===d[h][c]&&document.getElementById(h+"-"+c).classList.add("placed")):(document.getElementById(h+"-"+c).classList.remove("placed"),d[h][c]=0));a++}}},p=function(){e?u():f&&v();g&&w();window.sleep(600).then(function(){b&&
p()})},u=function(){switch(window.randomIntFromInterval(0,6)){case 0:for(var a=0;4>a;a++)document.getElementById("2-"+a).classList.add("moving"),d[2][a]=1;break;case 1:for(a=0;2>a;a++)document.getElementById("2-"+a).classList.add("moving"),d[2][a]=1;for(a=0;2>a;a++)document.getElementById("3-"+a).classList.add("moving"),d[3][a]=1;break;case 2:for(a=0;3>a;a++)document.getElementById("2-"+a).classList.add("moving"),d[2][a]=1;document.getElementById("3-2").classList.add("moving");d[3][2]=1;break;case 3:for(a=
0;3>a;a++)document.getElementById("2-"+a).classList.add("moving"),d[2][a]=1;document.getElementById("1-2").classList.add("moving");d[1][2]=1;break;case 4:for(a=0;3>a;a++)document.getElementById("2-"+a).classList.add("moving"),d[2][a]=1;document.getElementById("1-1").classList.add("moving");d[1][1]=1;break;case 5:for(a=0;2>a;a++)document.getElementById("2-"+a).classList.add("moving"),d[2][a]=1;for(a=0;2>a;a++)document.getElementById("3-"+(a+1)).classList.add("moving"),d[3][a+1]=1;break;case 6:for(a=
0;2>a;a++)document.getElementById("2-"+a).classList.add("moving"),d[2][a]=1;for(a=0;2>a;a++)document.getElementById("1-"+(a+1)).classList.add("moving"),d[1][a+1]=1}e=!1;f=!0},v=function(){var a=k();if(x(a))f=!1,g=!0;else{var b=[];a.forEach(function(a){var c=$jscomp.makeIterator(l(a.id));a=c.next().value;c=c.next().value;document.getElementById(a+"-"+c).classList.remove("moving");d[a][c]=0;b.push([a,c])});b.forEach(function(a){document.getElementById(a[0]+"-"+(a[1]+1)).classList.add("moving");d[a[0]][a[1]+
1]=1})}},x=function(a){var b=!1;a.forEach(function(a){var c=$jscomp.makeIterator(l(a.id));a=c.next().value;c=c.next().value;if(19===c||2===d[a][c+1])b=!0});return b},w=function(){k().forEach(function(a){a.classList.remove("moving");a.classList.add("placed");var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;d[a][b]=2});t();g=!1;e=!0},l=function(a){a=a.split("-");return[Number(a[0]),Number(a[1])]};(function(){for(var a=0;10>a;a++){var b=document.createElement("div");b.id="col-"+
a;b.classList.add("col");m.appendChild(b);d.push([]);for(var c=0;20>c;c++){var e=document.createElement("div");e.id=a+"-"+c;e.classList.add("cell");b.appendChild(e);d[a].push(0)}}document.getElementById("startBtn").addEventListener("click",r);document.addEventListener("keydown",q)})()})();
