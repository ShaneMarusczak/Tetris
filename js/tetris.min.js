var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,f){if(f.get||f.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[e]=f.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var e=0;return $jscomp.iteratorPrototype(function(){return e<c.length?{done:!1,value:c[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=c[Symbol.iterator];return e?e.call(c):$jscomp.arrayIterator(c)};
$jscomp.polyfill=function(c,e,f,g){if(e){f=$jscomp.global;c=c.split(".");for(g=0;g<c.length-1;g++){var m=c[g];m in f||(f[m]={});f=f[m]}c=c[c.length-1];g=f[c];e=e(g);e!=g&&null!=e&&$jscomp.defineProperty(f,c,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.from",function(c){return c?c:function(c,f,g){$jscomp.initSymbolIterator();f=null!=f?f:function(c){return c};var e=[],d=c[Symbol.iterator];if("function"==typeof d)for(c=d.call(c);!(d=c.next()).done;)e.push(f.call(g,d.value));else for(var d=c.length,k=0;k<d;k++)e.push(f.call(g,c[k]));return e}},"es6-impl","es3");
(function(){var c=!1,e=!1,f=!1,g=!1,m=document.getElementById("gameBoard"),d=[],k=function(){return Array.from(document.querySelectorAll(".moving"))},r=function(a){switch(a.key){case "ArrowLeft":n(-1);break;case "ArrowRight":n(1)}},n=function(a){var c=[],b=k();if(-1===a){if(b.some(function(a){return 0===Number(a.id.charAt(0))}))return;var h=!1;b.forEach(function(a){var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;2===d[a-1][b]&&(h=!0)});if(h)return}if(1===a){if(b.some(function(a){return 9===
Number(a.id.charAt(0))}))return;var e=!1;b.forEach(function(a){var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;2===d[a+1][b]&&(e=!0)});if(e)return}b.forEach(function(a){var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;document.getElementById(a+"-"+b).classList.remove("moving");d[a][b]=0;c.push([a,b])});c.forEach(function(b){document.getElementById(b[0]+a+"-"+b[1]).classList.add("moving");p(document.getElementById(b[0]+"-"+b[1]),document.getElementById(b[0]+
a+"-"+b[1]),"moving");d[b[0]+a][b[1]]=1})},t=function(){e=c=!0;q()},v=function(){for(var a=19;0<=a;a--){for(var c=0,b=0;10>b;b++)2===d[b][a]&&c++;if(10===c){c=a;for(b=0;10>b;b++)d[b][c]=0,document.getElementById(b+"-"+c).classList.remove("placed");c=a;for(b=19;0<=b;b--)for(var h=0;10>h;h++)if(!(b>c))if(b<=c&&0!==b){document.getElementById(h+"-"+b).classList.remove("placed");d[h][b]=d[h][b-1];var e=u(h,b);2===d[h][b]&&(document.getElementById(h+"-"+b).classList.add("placed"),document.getElementById(h+
"-"+b).classList.add(e))}else document.getElementById(h+"-"+b).classList.remove("placed"),d[h][b]=0;a++}}},q=function(){e?w():f&&x();g&&y();window.sleep(200).then(function(){c&&q()})},w=function(){switch(window.randomIntFromInterval(0,6)){case 0:for(var a=0;4>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("cyan"),d[2][a]=1;break;case 1:for(a=0;2>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("yellow"),
d[2][a]=1;for(a=0;2>a;a++)document.getElementById("3-"+a).classList.add("moving"),document.getElementById("3-"+a).classList.add("yellow"),d[3][a]=1;break;case 2:for(a=0;3>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("orange"),d[2][a]=1;document.getElementById("3-2").classList.add("moving");document.getElementById("3-2").classList.add("orange");d[3][2]=1;break;case 3:for(a=0;3>a;a++)document.getElementById("2-"+a).classList.add("moving"),
document.getElementById("2-"+a).classList.add("green"),d[2][a]=1;document.getElementById("1-2").classList.add("moving");document.getElementById("1-2").classList.add("green");d[1][2]=1;break;case 4:for(a=0;3>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("blue"),d[2][a]=1;document.getElementById("1-1").classList.add("moving");document.getElementById("1-1").classList.add("blue");d[1][1]=1;break;case 5:for(a=0;2>a;a++)document.getElementById("2-"+
a).classList.add("moving"),document.getElementById("2-"+a).classList.add("purple"),d[2][a]=1;for(a=0;2>a;a++)document.getElementById("3-"+(a+1)).classList.add("moving"),document.getElementById("3-"+(a+1)).classList.add("purple"),d[3][a+1]=1;break;case 6:for(a=0;2>a;a++)document.getElementById("2-"+a).classList.add("moving"),document.getElementById("2-"+a).classList.add("red"),d[2][a]=1;for(a=0;2>a;a++)document.getElementById("1-"+(a+1)).classList.add("moving"),document.getElementById("1-"+(a+1)).classList.add("red"),
d[1][a+1]=1}e=!1;f=!0},x=function(){var a=k();if(z(a))f=!1,g=!0;else{var c=[];a.forEach(function(a){var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;document.getElementById(a+"-"+b).classList.remove("moving");d[a][b]=0;c.push([a,b])});c.forEach(function(a){document.getElementById(a[0]+"-"+(a[1]+1)).classList.add("moving");d[a[0]][a[1]+1]=1;p(document.getElementById(a[0]+"-"+a[1]),document.getElementById(a[0]+"-"+(a[1]+1)),"moving")})}},z=function(a){var c=!1;a.forEach(function(a){var b=
$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;if(19===b||2===d[a][b+1])c=!0});return c},y=function(){k().forEach(function(a){a.classList.remove("moving");a.classList.add("placed");var c=$jscomp.makeIterator(l(a.id));a=c.next().value;c=c.next().value;d[a][c]=2});v();g=!1;e=!0},l=function(a){a=a.split("-");return[Number(a[0]),Number(a[1])]},u=function(a,c){var b=document.getElementById(a+"-"+c),d=document.getElementById(a+"-"+(c-1));b.classList.contains("blue")?b.classList.remove("blue"):
b.classList.contains("red")?b.classList.remove("red"):b.classList.contains("yellow")?b.classList.remove("yellow"):b.classList.contains("green")?b.classList.remove("green"):b.classList.contains("cyan")?b.classList.remove("cyan"):b.classList.contains("purple")?b.classList.remove("purple"):b.classList.contains("orange")&&b.classList.remove("orange");if(d.classList.contains("blue"))return"blue";if(d.classList.contains("red"))return"red";if(d.classList.contains("yellow"))return"yellow";if(d.classList.contains("green"))return"green";
if(d.classList.contains("cyan"))return"cyan";if(d.classList.contains("purple"))return"purple";if(d.classList.contains("orange"))return"orange"},p=function(a,c,b){a.classList.contains("blue")?(c.classList.add("blue"),a.classList.contains(b)||a.classList.remove("blue")):a.classList.contains("red")?(c.classList.add("red"),a.classList.contains(b)||a.classList.remove("red")):a.classList.contains("yellow")?(c.classList.add("yellow"),a.classList.contains(b)||a.classList.remove("yellow")):a.classList.contains("green")?
(c.classList.add("green"),a.classList.contains(b)||a.classList.remove("green")):a.classList.contains("cyan")?(c.classList.add("cyan"),a.classList.contains(b)||a.classList.remove("cyan")):a.classList.contains("purple")?(c.classList.add("purple"),a.classList.contains(b)||a.classList.remove("purple")):a.classList.contains("orange")&&(c.classList.add("orange"),a.classList.contains(b)||a.classList.remove("orange"))};(function(){for(var a=0;10>a;a++){var c=document.createElement("div");c.id="col-"+a;c.classList.add("col");
m.appendChild(c);d.push([]);for(var b=0;20>b;b++){var e=document.createElement("div");e.id=a+"-"+b;e.classList.add("cell");c.appendChild(e);d[a].push(0)}}document.getElementById("startBtn").addEventListener("click",t);document.addEventListener("keydown",r)})()})();
