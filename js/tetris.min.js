var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,f){if(f.get||f.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[d]=f.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var d=0;return $jscomp.iteratorPrototype(function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=a[Symbol.iterator];return d?d.call(a):$jscomp.arrayIterator(a)};
$jscomp.polyfill=function(a,d,f,g){if(d){f=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var m=a[g];m in f||(f[m]={});f=f[m]}a=a[a.length-1];g=f[a];d=d(g);d!=g&&null!=d&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,f,g){$jscomp.initSymbolIterator();f=null!=f?f:function(a){return a};var d=[],e=a[Symbol.iterator];if("function"==typeof e)for(a=e.call(a);!(e=a.next()).done;)d.push(f.call(g,e.value));else for(var e=a.length,h=0;h<e;h++)d.push(f.call(g,a[h]));return d}},"es6-impl","es3");
(function(){var a=!1,d=!1,f=!1,g=!1,m=document.getElementById("gameBoard"),e=[],h=function(){return Array.from(document.querySelectorAll(".moving"))},k=function(a,b){return"cell-"+a+"-"+b},r=function(a){"ArrowLeft"===a.key?p(-1):"ArrowRight"===a.key&&p(1)},p=function(a){var b=[];if(-1===a){if(h().some(function(a){return 0===Number(a.id.charAt(5))}))return;var c=!1;h().forEach(function(a){var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;2===e[a-1][b]&&(c=!0)});if(c)return}if(1===
a){if(h().some(function(a){return 9===Number(a.id.charAt(5))}))return;var n=!1;h().forEach(function(a){var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;2===e[a+1][b]&&(n=!0)});if(n)return}h().forEach(function(a){var c=$jscomp.makeIterator(l(a.id));a=c.next().value;c=c.next().value;document.getElementById(k(a,c)).classList.remove("moving");e[a][c]=0;b.push([a,c])});b.forEach(function(b){document.getElementById(k(b[0]+a,b[1])).classList.add("moving");e[b[0]+a][b[1]]=1})},t=function(){d=
a=!0;q()},u=function(){for(var a=19;0<=a;a--){for(var b=0,c=0;10>c;c++)2===e[c][a]&&b++;if(10===b){b=a;for(c=0;10>c;c++)e[c][b]=0,document.getElementById(k(c,b)).classList.remove("placed");b=a;for(c=19;0<=c;c--)for(var d=0;10>d;d++)c>b||(c<=b&&0!==c?(document.getElementById(k(d,c)).classList.remove("placed"),e[d][c]=e[d][c-1],2===e[d][c]&&document.getElementById(k(d,c)).classList.add("placed")):(document.getElementById(k(d,c)).classList.remove("placed"),e[d][c]=0));a++}}},q=function(){d?v():f&&w();
g&&x();window.sleep(200).then(function(){a&&q()})},v=function(){for(var a=0;4>a;a++)document.getElementById(k(1,a)).classList.add("moving"),e[1][a]=1;d=!1;f=!0},w=function(){if(y())f=!1,g=!0;else{var a=[];h().forEach(function(b){var c=$jscomp.makeIterator(l(b.id));b=c.next().value;c=c.next().value;document.getElementById(k(b,c)).classList.remove("moving");e[b][c]=0;a.push([b,c])});a.forEach(function(a){document.getElementById(k(a[0],a[1]+1)).classList.add("moving");e[a[0]][a[1]+1]=1})}},y=function(){var a=
!1;h().forEach(function(b){var c=$jscomp.makeIterator(l(b.id));b=c.next().value;c=c.next().value;if(19===c||2===e[b][c+1])a=!0});return a},x=function(){h().forEach(function(a){a.classList.remove("moving");a.classList.add("placed");var b=$jscomp.makeIterator(l(a.id));a=b.next().value;b=b.next().value;e[a][b]=2});u();g=!1;d=!0},l=function(a){a=a.split("-");return[Number(a[1]),Number(a[2])]};(function(){for(var a=0;10>a;a++){var b=document.createElement("div");b.id="col-"+a;b.classList.add("col");m.appendChild(b);
e.push([]);for(var c=0;20>c;c++){var d=document.createElement("div");d.id="cell-"+a+"-"+c;d.classList.add("cell");b.appendChild(d);e[a].push(0)}}document.getElementById("startBtn").addEventListener("click",t);document.addEventListener("keydown",r)})()})();
